"use strict";(()=>{var e={};e.id=436,e.ids=[436,660],e.modules={3806:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>u,default:()=>m,getServerSideProps:()=>p,getStaticPaths:()=>g,getStaticProps:()=>h,reportWebVitals:()=>b,routeModule:()=>w,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>y});var a=s(7093),n=s(5244),i=s(1323),o=s(9209),l=s.n(o),d=s(5913),c=s(1906),x=e([c]);c=(x.then?(await x)():x)[0];let m=(0,i.l)(c,"default"),h=(0,i.l)(c,"getStaticProps"),g=(0,i.l)(c,"getStaticPaths"),p=(0,i.l)(c,"getServerSideProps"),u=(0,i.l)(c,"config"),b=(0,i.l)(c,"reportWebVitals"),y=(0,i.l)(c,"unstable_getStaticProps"),f=(0,i.l)(c,"unstable_getStaticPaths"),v=(0,i.l)(c,"unstable_getStaticParams"),j=(0,i.l)(c,"unstable_getServerProps"),N=(0,i.l)(c,"unstable_getServerSideProps"),w=new a.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/console",pathname:"/console",bundlePath:"",filename:""},components:{App:d.default,Document:l()},userland:c});r()}catch(e){r(e)}})},2194:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>DmDashboard});var a=s(997),n=s(6689),i=s(3300),o=s(9648),l=e([o]);o=(l.then?(await l)():l)[0];let d="http://localhost:5000";function DmDashboard({sessionId:e,isVisible:t,onClose:s}){let{user:r}=(0,i.useUser)(),[l,c]=(0,n.useState)({items:[],pagination:{page:1,per_page:20,total:0,pages:0,has_next:!1,has_prev:!1}}),[x,m]=(0,n.useState)([]),[h,g]=(0,n.useState)(null),[p,u]=(0,n.useState)(null),[b,y]=(0,n.useState)(new Set),[f,v]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[w,S]=(0,n.useState)(!1),[T,_]=(0,n.useState)("pending"),[E,k]=(0,n.useState)(1),[C,R]=(0,n.useState)(null),[P,A]=(0,n.useState)(""),I=(0,n.useRef)(null),$=(0,n.useCallback)(()=>{I.current&&clearInterval(I.current),I.current=setInterval(()=>{t&&r&&(fetchPendingResponses(),fetchNotifications(),fetchAnalytics())},5e3)},[t,r,e,E,C,P]),D=(0,n.useCallback)(()=>{I.current&&(clearInterval(I.current),I.current=null)},[]);(0,n.useEffect)(()=>(t&&r?(fetchPendingResponses(),fetchNotifications(),fetchAnalytics(),$()):D(),()=>D()),[t,r,e,E,C,P,$,D]),(0,n.useEffect)(()=>{let handleKeyPress=e=>{t&&p&&("a"===e.key&&e.altKey?(e.preventDefault(),handleReview("approve")):"r"===e.key&&e.altKey?(e.preventDefault(),handleReview("reject")):"e"===e.key&&e.altKey?(e.preventDefault(),handleReview("edit")):"Escape"===e.key&&(u(null),y(new Set)))};return window.addEventListener("keydown",handleKeyPress),()=>window.removeEventListener("keydown",handleKeyPress)},[t,p]);let fetchPendingResponses=async()=>{try{S(!0);let t=new URLSearchParams({user_id:r?.id||"",page:E.toString(),per_page:"20"});C&&t.append("priority",C.toString()),P&&t.append("response_type",P);let s=await o.default.get(`${d}/api/session/${e}/pending-responses?${t}`);c(s.data)}catch(e){console.error("Error fetching pending responses:",e)}finally{S(!1)}},fetchNotifications=async()=>{try{let t=await o.default.get(`${d}/api/session/${e}/dm/notifications?user_id=${r?.id}`);m(t.data)}catch(e){console.error("Error fetching notifications:",e)}},fetchAnalytics=async()=>{try{let t=await o.default.get(`${d}/api/session/${e}/dm/analytics?user_id=${r?.id}`);g(t.data)}catch(e){console.error("Error fetching analytics:",e)}},handleReview=async t=>{if(p&&r)try{S(!0),await o.default.post(`${d}/api/session/${e}/pending-response/${p.id}/review`,{user_id:r.id,action:t,final_response:"edit"===t?f:void 0,dm_notes:j}),await fetchPendingResponses(),await fetchNotifications(),await fetchAnalytics(),u(null),v(""),N("")}catch(e){console.error("Error reviewing response:",e)}finally{S(!1)}},handleBulkReview=async t=>{if(0!==b.size&&r)try{S(!0),await o.default.post(`${d}/api/session/${e}/pending-responses/bulk`,{user_id:r.id,action:t,response_ids:Array.from(b),dm_notes:j}),await fetchPendingResponses(),await fetchNotifications(),await fetchAnalytics(),y(new Set),N("")}catch(e){console.error("Error bulk reviewing responses:",e)}finally{S(!1)}},markNotificationRead=async t=>{try{await o.default.post(`${d}/api/session/${e}/dm/notifications/${t}/mark-read`,{user_id:r?.id}),await fetchNotifications(),await fetchAnalytics()}catch(e){console.error("Error marking notification as read:",e)}},toggleResponseSelection=e=>{let t=new Set(b);t.has(e)?t.delete(e):t.add(e),y(t)},getPriorityColor=e=>{switch(e){case 3:return"text-red-400 bg-red-900";case 2:return"text-yellow-400 bg-yellow-900";default:return"text-green-400 bg-green-900"}},getPriorityLabel=e=>{switch(e){case 3:return"HIGH";case 2:return"MEDIUM";default:return"LOW"}},formatTimestamp=e=>new Date(e).toLocaleString();return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-green-400 p-6 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-400",children:"DM REVIEW DASHBOARD"}),a.jsx("button",{onClick:s,className:"text-red-400 hover:text-red-300 text-xl font-bold",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"flex mb-6 border-b border-gray-700",children:[(0,a.jsxs)("button",{className:`px-4 py-2 font-mono ${"pending"===T?"text-green-400 border-b-2 border-green-400":"text-gray-400 hover:text-green-400"}`,onClick:()=>_("pending"),children:["PENDING RESPONSES (",l.items.length,")"]}),(0,a.jsxs)("button",{className:`px-4 py-2 font-mono ${"notifications"===T?"text-green-400 border-b-2 border-green-400":"text-gray-400 hover:text-green-400"}`,onClick:()=>_("notifications"),children:["NOTIFICATIONS (",x.length,")"]}),a.jsx("button",{className:`px-4 py-2 font-mono ${"analytics"===T?"text-green-400 border-b-2 border-green-400":"text-gray-400 hover:text-green-400"}`,onClick:()=>_("analytics"),children:"ANALYTICS"})]}),"pending"===T&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-800 p-4 rounded border border-gray-600",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"PRIORITY FILTER"}),(0,a.jsxs)("select",{value:C||"",onChange:e=>{R(e.target.value?parseInt(e.target.value):null),k(1)},className:"bg-gray-700 text-green-400 p-2 rounded border border-gray-600 text-sm",children:[a.jsx("option",{value:"",children:"ALL"}),a.jsx("option",{value:"3",children:"HIGH"}),a.jsx("option",{value:"2",children:"MEDIUM"}),a.jsx("option",{value:"1",children:"LOW"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"TYPE FILTER"}),(0,a.jsxs)("select",{value:P,onChange:e=>{A(e.target.value),k(1)},className:"bg-gray-700 text-green-400 p-2 rounded border border-gray-600 text-sm",children:[a.jsx("option",{value:"",children:"ALL TYPES"}),a.jsx("option",{value:"narrative",children:"NARRATIVE"}),a.jsx("option",{value:"dice_roll",children:"DICE ROLL"}),a.jsx("option",{value:"npc_action",children:"NPC ACTION"})]})]})]}),b.size>0&&(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:[b.size," selected"]}),a.jsx("button",{onClick:()=>handleBulkReview("approve"),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded",children:"Bulk Approve"}),a.jsx("button",{onClick:()=>handleBulkReview("reject"),className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-sm rounded",children:"Bulk Reject"})]})]}),a.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Shortcuts: Alt+A (approve), Alt+R (reject), Alt+E (edit), Esc (clear selection)"})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:(0,a.jsxs)("div",{className:"pending-responses-list",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-mono text-yellow-400",children:"PENDING REVIEWS"}),l.items.length>0&&a.jsx("button",{onClick:()=>{b.size===l.items.length?y(new Set):y(new Set(l.items.map(e=>e.id)))},className:"text-xs text-blue-400 hover:text-blue-300",children:b.size===l.items.length?"Deselect All":"Select All"})]}),w?a.jsx("div",{className:"text-center py-8",children:a.jsx("div",{className:"text-green-400",children:"Loading..."})}):0===l.items.length?a.jsx("div",{className:"text-center py-8 text-gray-400",children:"No pending responses to review"}):a.jsx("div",{className:"space-y-4",children:l.items.map(e=>a.jsx("div",{className:`p-4 border rounded transition-colors ${p?.id===e.id?"border-green-400 bg-green-900 bg-opacity-20":"border-gray-600 hover:border-gray-500"}`,children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("input",{type:"checkbox",checked:b.has(e.id),onChange:t=>{t.stopPropagation(),toggleResponseSelection(e.id)},className:"mt-1 text-green-400 bg-gray-700 border-gray-600 rounded focus:ring-green-500"}),(0,a.jsxs)("div",{className:"flex-1 cursor-pointer",onClick:()=>{u(e),v(e.ai_response),N("")},children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-2 py-1 text-xs rounded ${getPriorityColor(e.priority)}`,children:getPriorityLabel(e.priority)}),a.jsx("span",{className:"text-blue-400 text-sm font-mono",children:e.response_type.toUpperCase()})]}),a.jsx("span",{className:"text-xs text-gray-400",children:formatTimestamp(e.created_at)})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-300 mb-2",children:[a.jsx("strong",{children:"Player:"})," ",e.user_id]}),(0,a.jsxs)("div",{className:"text-sm text-gray-300",children:[a.jsx("strong",{children:"Context:"})," ",e.context.substring(0,100),"..."]})]})]})},e.id))})]})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-mono mb-4 text-yellow-400",children:"REVIEW PANEL"}),p?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 border border-gray-600 rounded",children:[a.jsx("h4",{className:"text-green-400 font-mono mb-2",children:"PLAYER CONTEXT"}),a.jsx("div",{className:"text-gray-300 text-sm bg-gray-800 p-3 rounded",children:p.context})]}),(0,a.jsxs)("div",{className:"p-4 border border-gray-600 rounded",children:[a.jsx("h4",{className:"text-green-400 font-mono mb-2",children:"AI RESPONSE"}),a.jsx("div",{className:"text-gray-300 text-sm bg-gray-800 p-3 rounded",children:p.ai_response})]}),(0,a.jsxs)("div",{className:"p-4 border border-gray-600 rounded",children:[a.jsx("h4",{className:"text-green-400 font-mono mb-2",children:"EDIT RESPONSE (Optional)"}),a.jsx("textarea",{value:f,onChange:e=>v(e.target.value),className:"w-full h-32 bg-gray-800 text-gray-300 p-3 rounded border border-gray-600 focus:border-green-400 focus:outline-none text-sm",placeholder:"Edit the AI response or leave as-is to approve..."})]}),(0,a.jsxs)("div",{className:"p-4 border border-gray-600 rounded",children:[a.jsx("h4",{className:"text-green-400 font-mono mb-2",children:"DM NOTES (Optional)"}),a.jsx("textarea",{value:j,onChange:e=>N(e.target.value),className:"w-full h-20 bg-gray-800 text-gray-300 p-3 rounded border border-gray-600 focus:border-green-400 focus:outline-none text-sm",placeholder:"Add notes for the player..."})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>handleReview("approve"),disabled:w,className:"px-4 py-2 bg-green-700 hover:bg-green-600 text-white rounded font-mono disabled:opacity-50",children:"APPROVE"}),a.jsx("button",{onClick:()=>handleReview("edit"),disabled:w,className:"px-4 py-2 bg-yellow-700 hover:bg-yellow-600 text-white rounded font-mono disabled:opacity-50",children:"EDIT & APPROVE"}),a.jsx("button",{onClick:()=>handleReview("reject"),disabled:w,className:"px-4 py-2 bg-red-700 hover:bg-red-600 text-white rounded font-mono disabled:opacity-50",children:"REJECT"})]})]}):a.jsx("div",{className:"text-center py-8 text-gray-400",children:"Select a pending response to review"})]})]}),"notifications"===T&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-mono mb-4 text-yellow-400",children:"NOTIFICATIONS"}),0===x.length?a.jsx("div",{className:"text-center py-8 text-gray-400",children:"No unread notifications"}):a.jsx("div",{className:"space-y-3",children:x.map(e=>a.jsx("div",{className:"p-4 border border-gray-600 rounded hover:border-gray-500 transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("span",{className:`px-2 py-1 text-xs rounded ${"urgent_review"===e.notification_type?"bg-red-900 text-red-400":"bg-blue-900 text-blue-400"}`,children:e.notification_type.toUpperCase().replace("_"," ")}),a.jsx("span",{className:"text-xs text-gray-400",children:formatTimestamp(e.created_at)})]}),a.jsx("div",{className:"text-gray-300 text-sm",children:e.message})]}),a.jsx("button",{onClick:()=>markNotificationRead(e.id),className:"text-green-400 hover:text-green-300 text-sm font-mono",children:"MARK READ"})]})},e.id))})]}),"analytics"===T&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-mono mb-4 text-yellow-400",children:"ANALYTICS"}),h?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 border border-gray-600 rounded",children:[a.jsx("h4",{className:"text-green-400 font-mono mb-2",children:"QUEUE STATUS"}),(0,a.jsxs)("div",{className:"text-gray-300 text-sm",children:[a.jsx("strong",{children:"Pending:"})," ",h.queue_status.pending_count]}),(0,a.jsxs)("div",{className:"text-gray-300 text-sm",children:[a.jsx("strong",{children:"High Priority:"})," ",h.queue_status.high_priority_count]})]}),(0,a.jsxs)("div",{className:"p-4 border border-gray-600 rounded",children:[a.jsx("h4",{className:"text-green-400 font-mono mb-2",children:"REVIEW STATISTICS"}),(0,a.jsxs)("div",{className:"text-gray-300 text-sm",children:[a.jsx("strong",{children:"Total Reviewed:"})," ",h.review_stats.total_reviewed]}),(0,a.jsxs)("div",{className:"text-gray-300 text-sm",children:[a.jsx("strong",{children:"Approved:"})," ",h.review_stats.approved_count]}),(0,a.jsxs)("div",{className:"text-gray-300 text-sm",children:[a.jsx("strong",{children:"Rejected:"})," ",h.review_stats.rejected_count]}),(0,a.jsxs)("div",{className:"text-gray-300 text-sm",children:[a.jsx("strong",{children:"Edited:"})," ",h.review_stats.edited_count]}),(0,a.jsxs)("div",{className:"text-gray-300 text-sm",children:[a.jsx("strong",{children:"Approval Rate:"})," ",h.review_stats.approval_rate.toFixed(2),"%"]}),(0,a.jsxs)("div",{className:"text-gray-300 text-sm",children:[a.jsx("strong",{children:"Average Review Time:"})," ",h.review_stats.avg_review_time_minutes.toFixed(2)," minutes"]})]}),(0,a.jsxs)("div",{className:"p-4 border border-gray-600 rounded",children:[a.jsx("h4",{className:"text-green-400 font-mono mb-2",children:"NOTIFICATIONS"}),(0,a.jsxs)("div",{className:"text-gray-300 text-sm",children:[a.jsx("strong",{children:"Unread:"})," ",h.notifications.unread_count]})]})]}):a.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading analytics..."})]})]})}):null}r()}catch(e){r(e)}})},2427:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>ShadowrunConsole});var a=s(997),n=s(6689),i=s(3300),o=s(2194),l=s(9648),d=e([o,l]);[o,l]=d.then?(await d)():d;let c={shadowrunBarren:{name:"Shadowrun Barren",background:"bg-gray-950",text:"text-red-300",secondaryText:"text-gray-400",accent:"bg-red-900 text-red-100",prompt:"text-green-500",input:"bg-gray-900 border-red-900 border",inputText:"text-red-200",secondaryBackground:"bg-gray-900"},matrix:{name:"Matrix",background:"bg-black",text:"text-green-400",secondaryText:"text-green-600",accent:"bg-green-700 text-green-200",prompt:"text-green-500",input:"bg-black border-green-700 border",inputText:"text-green-400",secondaryBackground:"bg-green-900 bg-opacity-20"},cyberpunk:{name:"Cyberpunk",background:"bg-purple-900",text:"text-pink-300",secondaryText:"text-blue-300",accent:"bg-pink-600 text-blue-200",prompt:"text-yellow-300",input:"bg-purple-800 border-pink-500 border",inputText:"text-pink-300",secondaryBackground:"bg-purple-800"},terminal:{name:"Terminal",background:"bg-black",text:"text-amber-400",secondaryText:"text-amber-600",accent:"bg-amber-800 text-amber-200",prompt:"text-amber-500",input:"bg-black border-amber-700 border",inputText:"text-amber-400",secondaryBackground:"bg-amber-900 bg-opacity-20"}},x=[{id:"xs",name:"Extra Small",class:"text-xs"},{id:"sm",name:"Small",class:"text-sm"},{id:"base",name:"Medium",class:"text-base"},{id:"lg",name:"Large",class:"text-lg"},{id:"xl",name:"Extra Large",class:"text-xl"}];function ShadowrunConsole(){let{user:e,isSignedIn:t}=(0,i.useUser)(),[s,r]=(0,n.useState)(""),[d,m]=(0,n.useState)([]),[h,g]=(0,n.useState)("> "),[p,u]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!1),[j,N]=(0,n.useState)(null),[w,S]=(0,n.useState)(!1),T=(0,n.useRef)(null),_=(0,n.useRef)(null),[E,k]=(0,n.useState)({theme:"shadowrunBarren",fontSize:"base"});(0,n.useEffect)(()=>{let s=localStorage.getItem("shadowrun-settings");if(s)try{let e=JSON.parse(s);k(e)}catch(e){console.error("Failed to parse settings:",e)}g(t?`${e?.firstName||"User"}@SR > `:"> "),m([{command:"",output:'Shadowrun Interface Terminal v1.0\nType "help" for available commands.\nConnecting to the Matrix...'}])},[t,e]),(0,n.useEffect)(()=>{localStorage.setItem("shadowrun-settings",JSON.stringify(E))},[E]),(0,n.useEffect)(()=>{_.current&&(_.current.scrollTop=_.current.scrollHeight)},[d]),(0,n.useEffect)(()=>{T.current&&T.current.focus()},[]);let addToHistory=(e,t,s=!1,r=!1)=>{m(a=>[...a,{command:e,output:t,isProcessing:s,isStreaming:r}])},handleSessionCommand=async t=>{let s=t.split(" "),r=s[1],a=s.slice(2).join(" ");if("create"===r){if(!a){addToHistory(t,"Error: Session name is required. Usage: /session create [name]",!1);return}try{let s=await l.default.post("http://localhost:5000/api/session",{name:a,gm_user_id:e?.id});N(s.data.session_id),S(!0),addToHistory(t,`Session "${a}" created successfully!
Session ID: ${s.data.session_id}
You are the Game Master.`,!1)}catch(e){addToHistory(t,`Error creating session: ${e instanceof Error?e.message:"Unknown error"}`,!1)}}else if("join"===r){if(!a){addToHistory(t,"Error: Session ID is required. Usage: /session join [id]",!1);return}try{await l.default.post(`http://localhost:5000/api/session/${a}/join`,{user_id:e?.id,role:"player"}),N(a),S(!1),addToHistory(t,`Joined session ${a} as a player.`,!1)}catch(e){addToHistory(t,`Error joining session: ${e instanceof Error?e.message:"Unknown error"}`,!1)}}else addToHistory(t,"Error: Invalid session command. Use /session create [name] or /session join [id]",!1)},handleAiCommand=async t=>{let s=t.substring(4).trim();if(!s){addToHistory(t,"Error: Please provide a message for the AI. Usage: /ai [your message]",!1);return}if(!j){addToHistory(t,"Error: You must be in a session to use AI features.",!1);return}try{let r=await l.default.post(`http://localhost:5000/api/session/${j}/llm-with-review`,{user_id:e?.id,context:s,response_type:"narrative",priority:1,require_review:!w});"pending_review"===r.data.status?addToHistory(t,`AI response generated and sent for DM review.
Request ID: ${r.data.pending_response_id}
You will be notified when the DM approves your response.`,!1):addToHistory(t,r.data.choices?.[0]?.message?.content||"AI response received.",!1)}catch(e){addToHistory(t,`Error getting AI response: ${e instanceof Error?e.message:"Unknown error"}`,!1)}},handleSubmit=async e=>{if(e.preventDefault(),!s.trim()||p)return;let t=s.trim();r(""),addToHistory(t,"",!0),await handleCommand(t)},handleCommand=async e=>{let t=e.toLowerCase();u(!0);try{if("clear"===t){m([]),u(!1);return}if("help"===t)addToHistory(e,"Available commands:\n- clear: Clear the console\n- help: Show this help message\n- theme [name]: Change console theme (shadowrunBarren, matrix, cyberpunk, terminal)\n- settings: Open settings panel\n- /session create [name]: Create a new game session (GM only)\n- /session join [id]: Join an existing session\n- /dm dashboard: Open DM review dashboard (GM only)\n- /ai [message]: Request AI response with DM review\n- /scene [description]: Set a new scene\n- /roll [dice]: Roll dice (e.g., /roll 3d6)\n- /summon [character]: Summon an NPC\n- /echo [message]: Display a message to all players",!1);else if(t.startsWith("theme ")){let s=t.replace("theme ","");if(c[s]){let t={...E,theme:s};k(t),addToHistory(e,`Theme changed to ${c[s].name}`,!1)}else addToHistory(e,`Theme not found. Available themes: ${Object.keys(c).join(", ")}`,!1)}else if("settings"===t)y(!0),addToHistory(e,"Opening settings panel...",!1);else if(t.startsWith("/session "))await handleSessionCommand(e);else if("/dm dashboard"===t)w?j?(v(!0),addToHistory(e,"Opening DM Review Dashboard...",!1)):addToHistory(e,"Error: You must be in a session to access the DM dashboard.",!1):addToHistory(e,"Error: Only Game Masters can access the DM dashboard.",!1);else if(t.startsWith("/ai "))await handleAiCommand(e);else if(t.startsWith("/scene ")){let t=e.substring(7);addToHistory(e,`Setting scene: ${t}
The GM is describing the scene...`,!1)}else if(t.startsWith("/roll ")){let t=e.substring(6);addToHistory(e,`Rolling ${t}...
Result: 14 (simulated roll)`,!1)}else addToHistory(e,`Unknown command: ${e}
Type "help" for available commands.`,!1)}catch(t){console.error("Error processing command:",t),addToHistory(e,`Error: ${t instanceof Error?t.message:"Unknown error processing command"}`,!1)}finally{u(!1)}},C=c[E.theme],R=x.find(e=>e.id===E.fontSize)?.class||"text-base";return(0,a.jsxs)("div",{className:`min-h-screen flex flex-col ${C.background}`,children:[a.jsx("header",{className:"p-2 border-b border-red-900",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:`${C.prompt} font-mono font-bold`,children:"SHADOWRUN MATRIX INTERFACE"}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("button",{onClick:()=>y(!0),className:`px-3 py-1 rounded ${C.accent} hover:opacity-80`,children:"Settings"})})]})}),a.jsx("div",{ref:_,className:`flex-1 p-4 overflow-y-auto font-mono ${R}`,onClick:()=>T.current?.focus(),children:d.map((e,t)=>(0,a.jsxs)("div",{className:"mb-4",children:[e.command&&(0,a.jsxs)("div",{className:"flex",children:[a.jsx("span",{className:`${C.prompt} mr-2`,children:h}),a.jsx("span",{className:C.text,children:e.command})]}),(0,a.jsxs)("div",{className:`pl-4 whitespace-pre-wrap ${C.secondaryText}`,children:[e.output,e.isProcessing&&a.jsx("span",{className:"streaming-cursor ml-1"})]})]},t))}),a.jsx("form",{onSubmit:handleSubmit,className:"p-2 border-t border-red-900",children:(0,a.jsxs)("div",{className:`flex items-center ${C.input} p-2 rounded`,children:[a.jsx("span",{className:`${C.prompt} mr-2`,children:h}),a.jsx("input",{ref:T,type:"text",value:s,onChange:e=>r(e.target.value),className:`flex-1 bg-transparent outline-none ${C.inputText}`,disabled:p,placeholder:p?"Processing...":"Type a command..."})]})}),b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:`${C.secondaryBackground} p-6 rounded-lg max-w-md w-full`,children:[a.jsx("h2",{className:`${C.prompt} text-xl font-bold mb-4`,children:"Console Settings"}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:`${C.text} block mb-2`,children:"Theme"}),a.jsx("select",{value:E.theme,onChange:e=>k({...E,theme:e.target.value}),className:"w-full p-2 bg-gray-800 text-white rounded",children:Object.entries(c).map(([e,t])=>a.jsx("option",{value:e,children:t.name},e))})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:`${C.text} block mb-2`,children:"Font Size"}),a.jsx("select",{value:E.fontSize,onChange:e=>k({...E,fontSize:e.target.value}),className:"w-full p-2 bg-gray-800 text-white rounded",children:x.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))})]}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:()=>y(!1),className:`px-4 py-2 rounded ${C.accent}`,children:"Close"})})]})}),f&&j&&a.jsx(o.Z,{sessionId:j,isVisible:f,onClose:()=>v(!1)})]})}r()}catch(e){r(e)}})},1906:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>ConsolePage});var a=s(997),n=s(968),i=s.n(n),o=s(3300),l=s(2427),d=e([l]);function ConsolePage(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[a.jsx("title",{children:"Shadowrun Interface | Console"}),a.jsx("meta",{name:"description",content:"Shadowrun RPG terminal interface"})]}),a.jsx(o.SignedIn,{children:a.jsx("div",{className:"min-h-screen bg-sr-dark flex flex-col",children:a.jsx(l.Z,{})})}),a.jsx(o.SignedOut,{children:a.jsx(o.RedirectToSignIn,{})})]})}l=(d.then?(await d)():d)[0],r()}catch(e){r(e)}})},3300:e=>{e.exports=require("@clerk/nextjs")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[761,163,209,450,913],()=>__webpack_exec__(3806));module.exports=s})();