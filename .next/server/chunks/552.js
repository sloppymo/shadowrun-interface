"use strict";exports.id=552,exports.ids=[552],exports.modules={8552:(e,t,i)=>{function rollShadowrunDice(e,t={}){let i=[],l=[];for(let t=0;t<e;t++)i.push(Math.floor(6*Math.random())+1);if(t.edge||t.explodingDice){let e=i.filter(e=>6===e).length;for(;e>0;){for(let t=0;t<e;t++){let e=Math.floor(6*Math.random())+1;l.push(e)}e=l.filter(e=>6===e).length}}if(t.rerollOnes)for(let e=0;e<i.length;e++)1===i[e]&&(i[e]=Math.floor(6*Math.random())+1);let r=[...i,...l],s=r.filter(e=>e>=5).length,o=i.filter(e=>1===e).length,n=r.filter(e=>6===e).length,d=t.limit&&!t.pushTheLimit?Math.min(s,t.limit):s,a=o>Math.floor(e/2);return{dice:e,results:r,hits:d,ones:o,sixes:n,isGlitch:a,isCriticalGlitch:a&&0===d,exploded:l}}function parseDiceCommand(e){let t=e.toLowerCase().trim(),i=t.match(/^(\d+)(?:\s*(?:limit|l)\s*(\d+))?(?:\s*(edge|e))?$/);if(i){let e=parseInt(i[1]),t=i[2]?parseInt(i[2]):void 0,l=!!i[3];return rollShadowrunDice(e,{limit:t,edge:l})}let l=t.match(/^\d+d\d+([+-]\d+)?$/);if(l)return function(e){let t=e.match(/(\d+)d(\d+)([+-]\d+)?/i);if(!t)throw Error('Invalid dice notation. Use format like "3d6" or "2d8+2"');let i=parseInt(t[1]),l=parseInt(t[2]),r=t[3]?parseInt(t[3]):0,s=[];for(let e=0;e<i;e++)s.push(Math.floor(Math.random()*l)+1);let o=s.reduce((e,t)=>e+t,0)+r;return{dice:i,results:s,hits:0,ones:0,sixes:0,isGlitch:!1,isCriticalGlitch:!1,total:o,exploded:[]}}(t);let r=t.match(/^init(?:iative)?(?:\s+(\d+))?$/);if(r){let e=r[1]?parseInt(r[1]):8,t=Math.floor(6*Math.random())+1;return{dice:1,results:[t],hits:0,ones:0,sixes:0,isGlitch:!1,isCriticalGlitch:!1,total:t+e,exploded:[]}}throw Error('Invalid dice command. Try: "12" (SR dice), "3d6" (standard), or "init 12" (initiative)')}function formatDiceResult(e,t){let i=`Rolling ${t}...
`;return void 0!==e.total?i+=`Results: [${e.results.join(", ")}]
Total: ${e.total}`:(i+=`Results: [${e.results.join(", ")}]
Hits: ${e.hits}`,e.exploded.length>0&&(i+=` (+ ${e.exploded.length} exploded dice: [${e.exploded.join(", ")}])`),e.isCriticalGlitch?i+=`
ðŸ’€ CRITICAL GLITCH! (${e.ones} ones, no hits)`:e.isGlitch&&(i+=`
âš ï¸ Glitch! (${e.ones} ones)`),0!==e.hits||e.isCriticalGlitch?e.hits>=4?i+="\nâœ¨ Excellent success!":e.hits>=2?i+="\nâœ… Good success!":1===e.hits&&(i+="\n\uD83D\uDC4D Marginal success"):i+="\nâŒ No hits - failure!"),i}function spendEdge(e,t){let i={edge:!0};switch(t){case"reroll":i.rerollOnes=!0;break;case"explode":i.explodingDice=!0;break;case"pushLimit":i.pushTheLimit=!0}return rollShadowrunDice(e,i)}i.d(t,{EA:()=>formatDiceResult,_p:()=>spendEdge,iI:()=>parseDiceCommand})}};