"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[325],{8325:function(e,t,l){l.r(t),l.d(t,{KeylessCreatorOrReader:function(){return h}});var n=l(9332),a=l(7294),i=l(4970);let r=(0,l(7703).t5)({packageName:"@clerk/nextjs"});var s=l(3454);let u="__clerk_keys_";async function c(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("").slice(0,16)}async function o(){let e=s.env.PWD;if(!e)return`${u}0`;let t=e.split("/").filter(Boolean).slice(-3).reverse().join("/"),l=await c(t);return`${u}${l}`}var y=l(4524);let _={secure:!1,httpOnly:!1,sameSite:"lax"};async function b(){if(!y.h)return null;let e=await l.e(985).then(l.bind(l,7985)).then(e=>e.createOrReadKeyless()).catch(()=>null);if(!e)return r.throwMissingPublishableKeyError(),null;let{clerkDevelopmentCache:t,createKeylessModeMessage:n}=await l.e(553).then(l.bind(l,8553));null==t||t.log({cacheKey:e.publishableKey,msg:n(e)});let{claimUrl:a,publishableKey:s,secretKey:u,apiKeysUrl:c}=e;return(await (0,i.cookies)()).set(await o(),JSON.stringify({claimUrl:a,publishableKey:s,secretKey:u}),_),{claimUrl:a,publishableKey:s,apiKeysUrl:c}}let h=e=>{var t;let{children:l}=e,i=(null==(t=(0,n.useSelectedLayoutSegments)()[0])?void 0:t.startsWith("/_not-found"))||!1,[r,s]=a.useActionState(b,null);return((0,a.useEffect)(()=>{i||a.startTransition(()=>{s()})},[i]),a.isValidElement(l))?a.cloneElement(l,{key:null==r?void 0:r.publishableKey,publishableKey:null==r?void 0:r.publishableKey,__internal_keyless_claimKeylessApplicationUrl:null==r?void 0:r.claimUrl,__internal_keyless_copyInstanceKeysUrl:null==r?void 0:r.apiKeysUrl,__internal_bypassMissingPublishableKey:!0}):l}}}]);